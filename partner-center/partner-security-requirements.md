---
title: 合作伙伴安全要求
ms.topic: article
ms.date: 10/30/2020
ms.service: partner-dashboard
ms.subservice: partnercenter-csp
description: 引入合作伙伴安全要求，以启用多重身份验证 (MFA) 并采用安全应用程序模型框架。
author: vijvala
ms.author: vijvala
ms.localizationpriority: high
ms.custom: SEOMAY.20
ms.openlocfilehash: 351d0715645b6e43607279393cdc376d898a7f54
ms.sourcegitcommit: 98f5eebe7d08ba214ed5a078f1ac770439e41eb7
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/31/2020
ms.locfileid: "93132971"
---
# <a name="security-requirements-for-using-partner-center-or-partner-center-apis"></a><span data-ttu-id="d9478-103">使用合作伙伴中心或合作伙伴中心 API 的安全要求</span><span class="sxs-lookup"><span data-stu-id="d9478-103">Security requirements for using Partner Center or Partner Center APIs</span></span>

<span data-ttu-id="d9478-104">**适用于**</span><span class="sxs-lookup"><span data-stu-id="d9478-104">**Applies to**</span></span>

- <span data-ttu-id="d9478-105">云解决方案提供商计划中的所有合作伙伴</span><span class="sxs-lookup"><span data-stu-id="d9478-105">All partners in the Cloud Solution Provider program</span></span>
- <span data-ttu-id="d9478-106">所有控制面板供应商</span><span class="sxs-lookup"><span data-stu-id="d9478-106">All Control Panel Vendors</span></span>
- <span data-ttu-id="d9478-107">所有顾问</span><span class="sxs-lookup"><span data-stu-id="d9478-107">All Advisors</span></span>

<span data-ttu-id="d9478-108">**相应的用户**</span><span class="sxs-lookup"><span data-stu-id="d9478-108">**Appropriate users**</span></span>

- <span data-ttu-id="d9478-109">所有支持的用户，包括来宾用户</span><span class="sxs-lookup"><span data-stu-id="d9478-109">All enabled users including guest users</span></span>

<span data-ttu-id="d9478-110">本文介绍了针对参与云解决方案提供商计划的顾问、控制面板供应商和合作伙伴的强制性安全要求，以及身份验证选项和其他安全注意事项。</span><span class="sxs-lookup"><span data-stu-id="d9478-110">This article explains the mandatory security requirements for Advisors, Control Panel Vendors, and partners participating in the Cloud Solution Provider program, as well as authentication options and other security considerations.</span></span> <span data-ttu-id="d9478-111">隐私保护和安全性是我们优先关注的事项。</span><span class="sxs-lookup"><span data-stu-id="d9478-111">Privacy safeguards and security are among our top priorities.</span></span> <span data-ttu-id="d9478-112">我们知道，最好的防御措施是防患于未然，链条的强度取决于其最弱的一环。</span><span class="sxs-lookup"><span data-stu-id="d9478-112">We know that the best defense is prevention and that we are only as strong as our weakest link.</span></span> <span data-ttu-id="d9478-113">因此，我们需要生态系统中的所有人都行动起来，确保将安全保护措施实施到位。</span><span class="sxs-lookup"><span data-stu-id="d9478-113">That is why we need everyone in our ecosystem to act and ensure appropriate security protections are in place.</span></span>

## <a name="mandatory-security-requirements"></a><span data-ttu-id="d9478-114">强制性安全要求</span><span class="sxs-lookup"><span data-stu-id="d9478-114">Mandatory security requirements</span></span>

<span data-ttu-id="d9478-115">不实施这些强制性要求的合作伙伴将不能在云解决方案提供商计划中进行事务处理，也不能利用委托管理权限来管理客户租户。</span><span class="sxs-lookup"><span data-stu-id="d9478-115">Partners who do not implement the mandatory security requirements will not be able to transact in the Cloud Solution Provider program or manage customer tenants leveraging delegated admin rights.</span></span> <span data-ttu-id="d9478-116">另外，不实施安全要求的合作伙伴可能有无法参与计划的风险。</span><span class="sxs-lookup"><span data-stu-id="d9478-116">In addition, partners who do not implement the security requirements may put their participation in programs at risk.</span></span> <span data-ttu-id="d9478-117">与合作伙伴安全要求相关的条款已添加到 Microsoft 合作伙伴协议中。</span><span class="sxs-lookup"><span data-stu-id="d9478-117">The terms associated with the partner security requirements have been added to the Microsoft Partner Agreement.</span></span> <span data-ttu-id="d9478-118">由于与顾问相关，因此会实施相同的合同要求。</span><span class="sxs-lookup"><span data-stu-id="d9478-118">As it relates to Advisors, the same contractual requirements will be in place.</span></span>

<span data-ttu-id="d9478-119">为了保护你和你的客户，我们要求合作伙伴立即采取以下措施：</span><span class="sxs-lookup"><span data-stu-id="d9478-119">To protect you and your customers, we are requiring partners to take the following actions immediately:</span></span>  

1. <span data-ttu-id="d9478-120">**为合作伙伴租户中的所有用户帐户启用多重身份验证 (MFA)** 。</span><span class="sxs-lookup"><span data-stu-id="d9478-120">**Enable multi-factor authentication (MFA) for all user accounts in your partner tenant**.</span></span> <span data-ttu-id="d9478-121">必须为合作伙伴租户中的所有用户帐户启用 MFA。</span><span class="sxs-lookup"><span data-stu-id="d9478-121">You must enforce MFA on all user accounts in your partner tenant(s).</span></span> <span data-ttu-id="d9478-122">在登录到 Microsoft 商业云服务时，或者通过合作伙伴中心或 API 在云解决方案提供商计划中进行事务处理时，用户必须接受 MFA。</span><span class="sxs-lookup"><span data-stu-id="d9478-122">Users must be challenged by MFA when they sign in to Microsoft commercial cloud services or when they transact in the Cloud Solution Provider program through Partner Center or via APIs.</span></span>

2. <span data-ttu-id="d9478-123">**采用安全应用程序模型框架** 。</span><span class="sxs-lookup"><span data-stu-id="d9478-123">**Adopt the Secure Application Model framework**.</span></span> <span data-ttu-id="d9478-124">所有集成合作伙伴中心 API 的合作伙伴必须对任何应用和用户身份验证模型应用程序采用[安全应用程序模型框架](/partner-center/develop/enable-secure-app-model)。</span><span class="sxs-lookup"><span data-stu-id="d9478-124">All partners integrating with Partner Center APIs must adopt the [Secure Application Model framework](/partner-center/develop/enable-secure-app-model) for any app and user auth model applications.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="d9478-125">强烈建议合作伙伴实现安全应用程序模型，以便集成 Microsoft API（例如 Azure 资源管理器或 Microsoft Graph）或利用自动化时（例如使用用户凭据的 PowerShell），避免在强制实施 MFA 时出现任何中断。</span><span class="sxs-lookup"><span data-stu-id="d9478-125">We strongly recommend that partners implement the Secure Application Model for integrating with a Microsoft API, such as Azure Resource Manager or Microsoft Graph, or when leveraging automation such as PowerShell using user credentials, to avoid any disruption when MFA is enforced.</span></span>

<span data-ttu-id="d9478-126">这些安全要求将有助于保护你的基础结构与客户数据免受身份盗用或其他欺诈事件等潜在安全风险的影响。</span><span class="sxs-lookup"><span data-stu-id="d9478-126">These security requirements will help protect your infrastructure and safeguard your customers' data from potential security risks such as identify theft or other fraud incidents.</span></span>  

## <a name="implementing-multi-factor-authentication"></a><span data-ttu-id="d9478-127">实施多重身份验证</span><span class="sxs-lookup"><span data-stu-id="d9478-127">Implementing multi-factor authentication</span></span>

<span data-ttu-id="d9478-128">若要符合合作伙伴安全要求，必须为合作伙伴租户中的每个用户帐户实施并强制执行多重身份验证。</span><span class="sxs-lookup"><span data-stu-id="d9478-128">To comply with the partner security requirements, you must implement and enforce MFA for each user account in your partner tenant.</span></span> <span data-ttu-id="d9478-129">可通过下述方法之一完成此操作：</span><span class="sxs-lookup"><span data-stu-id="d9478-129">You can do this one of the way following ways:</span></span>

- <span data-ttu-id="d9478-130">实现 [Azure Active Directory (Azure AD) 安全默认值](/azure/active-directory/conditional-access/concept-conditional-access-security-defaults)。</span><span class="sxs-lookup"><span data-stu-id="d9478-130">Implement [Azure Active Directory (Azure AD) security defaults](/azure/active-directory/conditional-access/concept-conditional-access-security-defaults).</span></span> <span data-ttu-id="d9478-131">详见[下一节](#security-defaults)。</span><span class="sxs-lookup"><span data-stu-id="d9478-131">See more in the [next section](#security-defaults).</span></span>

- <span data-ttu-id="d9478-132">为每个用户帐户购买 Azure Active Directory Premium。</span><span class="sxs-lookup"><span data-stu-id="d9478-132">Purchase Azure Active Directory Premium for each user account.</span></span> <span data-ttu-id="d9478-133">有关详细信息，请参阅[规划 Azure 多重身份验证部署](/azure/active-directory/authentication/howto-mfa-getstarted)。</span><span class="sxs-lookup"><span data-stu-id="d9478-133">For more information, see [Plan an Azure Multi-Factor Authentication deployment](/azure/active-directory/authentication/howto-mfa-getstarted).</span></span>

- <span data-ttu-id="d9478-134">使用第三方解决方案为合作伙伴租户中的每个用户帐户强制实施 MFA。</span><span class="sxs-lookup"><span data-stu-id="d9478-134">Use a third-party solution to enforce MFA for each user account in your partner tenant.</span></span> <span data-ttu-id="d9478-135">要确保解决方案将提供预期的解决办法，请参阅[如何强制实施安全要求](#how-the-requirements-are-enforced)。</span><span class="sxs-lookup"><span data-stu-id="d9478-135">To ensure the solution will provide the expected solution, see [how the security requirements will be enforced](#how-the-requirements-are-enforced).</span></span>

> [!NOTE]
> <span data-ttu-id="d9478-136">虽然多重身份验证不是主权云（Microsoft Cloud for US Government、德国 Microsoft 云）的协议要求的，但我们仍强烈建议你履行这些安全要求。</span><span class="sxs-lookup"><span data-stu-id="d9478-136">Although multi-factor authentication is not contractually required for a sovereign cloud (US Government and Germany) it is highly recommended you adopt these security requirements.</span></span>

### <a name="security-defaults"></a><span data-ttu-id="d9478-137">安全性默认设置</span><span class="sxs-lookup"><span data-stu-id="d9478-137">Security defaults</span></span>

<span data-ttu-id="d9478-138">合作伙伴可选择用于实现 MFA 要求的选项之一是在 Azure AD 中启用安全默认值。</span><span class="sxs-lookup"><span data-stu-id="d9478-138">One of the options that partners can choose to implement MFA requirements is to enable security defaults in Azure AD.</span></span> <span data-ttu-id="d9478-139">安全默认值提供基本的安全级别，无需额外付费。</span><span class="sxs-lookup"><span data-stu-id="d9478-139">Security defaults offer a basic level of security at no extra cost.</span></span> <span data-ttu-id="d9478-140">启用安全默认值之前，请查看如何使用 Azure AD 为组织启用 MFA，并查看以下关键注意事项。</span><span class="sxs-lookup"><span data-stu-id="d9478-140">Review how to enable MFA for your organization with Azure AD and the key considerations below before enabling security defaults.</span></span>

- <span data-ttu-id="d9478-141">已采用基线策略的合作伙伴需采取行动过渡到安全性默认设置。</span><span class="sxs-lookup"><span data-stu-id="d9478-141">Partners who already adopted baseline policies need to take action to transition to security defaults.</span></span>

- <span data-ttu-id="d9478-142">安全默认值是预览版基线策略的正式版替代品。</span><span class="sxs-lookup"><span data-stu-id="d9478-142">Security defaults are the general availability replacement of the preview baseline policies.</span></span> <span data-ttu-id="d9478-143">一旦合作伙伴启用了安全默认值，他们就不再能够启用基线策略。</span><span class="sxs-lookup"><span data-stu-id="d9478-143">Once a partner enables the security defaults, they will no longer be able to enable baseline policies.</span></span>

- <span data-ttu-id="d9478-144">使用安全性默认设置时，所有策略都会一次性启用。</span><span class="sxs-lookup"><span data-stu-id="d9478-144">With security defaults, all policies will be enabled at once.</span></span>

- <span data-ttu-id="d9478-145">对于使用[条件访问](/azure/active-directory/conditional-access/concept-conditional-access-policy-common)的合作伙伴，[安全默认值将不可用](/azure/active-directory/fundamentals/concept-fundamentals-security-defaults#disabling-security-defaults)。</span><span class="sxs-lookup"><span data-stu-id="d9478-145">For partners who use [conditional access](/azure/active-directory/conditional-access/concept-conditional-access-policy-common), [security defaults will not be available](/azure/active-directory/fundamentals/concept-fundamentals-security-defaults#disabling-security-defaults).</span></span>

- <span data-ttu-id="d9478-146">我们目前不阻止旧版身份验证。</span><span class="sxs-lookup"><span data-stu-id="d9478-146">We do not block legacy authentication at this time.</span></span> <span data-ttu-id="d9478-147">但是，由于大多数与已泄露标识相关的事件都来自于使用旧身份验证的登录尝试，因此建议合作伙伴脱离这些早期协议。</span><span class="sxs-lookup"><span data-stu-id="d9478-147">However, as most events related to compromised identities come from sign-in attempts using legacy authentication, partners are encouraged to move away from these older protocols.</span></span>

- <span data-ttu-id="d9478-148">Azure AD Connect 同步帐户已从安全默认值中排除。</span><span class="sxs-lookup"><span data-stu-id="d9478-148">Azure AD Connect synchronization account is excluded from security defaults.</span></span>

<span data-ttu-id="d9478-149">有关详细信息，请阅读[组织的 Azure 多重身份验证概述](/azure/active-directory/authentication/concept-mfa-get-started)和[什么是安全默认值？](/azure/active-directory/conditional-access/concept-conditional-access-security-defaults)。</span><span class="sxs-lookup"><span data-stu-id="d9478-149">For detailed information, read [Overview of Azure Multi-Factor Authentication for your organization](/azure/active-directory/authentication/concept-mfa-get-started) and [What are security defaults?](/azure/active-directory/conditional-access/concept-conditional-access-security-defaults).</span></span>

> [!NOTE]
> <span data-ttu-id="d9478-150">Azure AD 安全性默认设置是从简化的基线保护策略演进过来的。</span><span class="sxs-lookup"><span data-stu-id="d9478-150">Azure AD security defaults is the evolution of the baseline protection policies simplified.</span></span> <span data-ttu-id="d9478-151">如果你已启用基线保护策略，强烈建议你启用[安全默认值](/azure/active-directory/conditional-access/concept-conditional-access-security-defaults)。</span><span class="sxs-lookup"><span data-stu-id="d9478-151">If you have already enabled the baseline protection policies, then it is highly recommended that you enable [security defaults](/azure/active-directory/conditional-access/concept-conditional-access-security-defaults).</span></span>

## <a name="implementation-considerations"></a><span data-ttu-id="d9478-152">实现注意事项</span><span class="sxs-lookup"><span data-stu-id="d9478-152">Implementation considerations</span></span>

<span data-ttu-id="d9478-153">由于这些要求适用于合作伙伴租户中的所有用户帐户，因此你需要考虑一些事项以确保顺利进行部署。</span><span class="sxs-lookup"><span data-stu-id="d9478-153">Because these requirements apply to all user accounts in your partner tenant, you need to consider several things to ensure a smooth deployment.</span></span> <span data-ttu-id="d9478-154">例如，确定 Azure AD 中不能执行 MFA 的用户帐户，以及组织中不支持新式身份验证的应用程序和设备。</span><span class="sxs-lookup"><span data-stu-id="d9478-154">For example, identify user accounts in Azure AD that cannot perform MFA, as well as applications and devices in your organization that do not support modern authentication.</span></span>

<span data-ttu-id="d9478-155">建议在执行任何操作之前完成以下验证。</span><span class="sxs-lookup"><span data-stu-id="d9478-155">Prior to performing any action, we recommend you complete the following validations.</span></span> 

#### <a name="do-you-have-an-application-or-device-that-does-not-support-the-use-of-modern-authentication"></a><span data-ttu-id="d9478-156">你是否有不支持使用新式身份验证的应用程序或设备？</span><span class="sxs-lookup"><span data-stu-id="d9478-156">Do you have an application or device that does not support the use of modern authentication?</span></span>

<span data-ttu-id="d9478-157">强制实施 MFA 时，系统会阻止旧版身份验证协议（例如 IMAP、POP3、SMTP 等）的使用，因为这些协议不支持 MFA。</span><span class="sxs-lookup"><span data-stu-id="d9478-157">When you enforce MFA, legacy authentication use protocols such as IMAP, POP3, SMTP, etc. will be blocked because they don't support MFA.</span></span> <span data-ttu-id="d9478-158">为了解决此限制问题，可以使用[应用密码](/azure/active-directory/authentication/howto-mfa-mfasettings#app-passwords)功能，确保应用程序或设备仍然会进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d9478-158">To address this limitation, use the [app passwords](/azure/active-directory/authentication/howto-mfa-mfasettings#app-passwords) feature to ensure the application or device will still authenticate.</span></span> <span data-ttu-id="d9478-159">请查看[应用密码使用注意事项](/azure/active-directory/authentication/howto-mfa-mfasettings#considerations-about-app-passwords)，确定应用密码是否可以在你的环境中使用。</span><span class="sxs-lookup"><span data-stu-id="d9478-159">Review the [considerations for using app passwords](/azure/active-directory/authentication/howto-mfa-mfasettings#considerations-about-app-passwords) to determine if they can be used in your environment.</span></span>

#### <a name="do-you-have-office-365-users-with-licenses-associated-with-your-partner-tenant"></a><span data-ttu-id="d9478-160">你是否有拥有与你的合作伙伴租户关联的许可证的 Office 365 用户？</span><span class="sxs-lookup"><span data-stu-id="d9478-160">Do you have Office 365 users with licenses associated with your partner tenant?</span></span>

<span data-ttu-id="d9478-161">在实现任何解决方案之前，建议你确定合作伙伴租户中的用户所使用的 Microsoft Office 版本。</span><span class="sxs-lookup"><span data-stu-id="d9478-161">Prior to implementing any solution, we recommend that you determine what version of Microsoft Office users in your partner tenant are using.</span></span> <span data-ttu-id="d9478-162">用户可能会在使用 Outlook 之类的应用程序时遇到连接问题。</span><span class="sxs-lookup"><span data-stu-id="d9478-162">There is a chance your users will experience connectivity issues with applications like Outlook.</span></span> <span data-ttu-id="d9478-163">在强制实施 MFA 之前，必须确保使用的是 Outlook 2013 SP1 或更高版本，且组织已启用新式身份验证。</span><span class="sxs-lookup"><span data-stu-id="d9478-163">Before enforcing MFA, it is important to ensure that you are using Outlook 2013 SP1, or later, and that your organization has modern authentication enabled.</span></span> <span data-ttu-id="d9478-164">有关详细信息，请参阅[在 Exchange Online 中启用新式身份验证](/exchange/clients-and-mobile-in-exchange-online/enable-or-disable-modern-authentication-in-exchange-online)。</span><span class="sxs-lookup"><span data-stu-id="d9478-164">For more information, see [Enable modern authentication in Exchange Online](/exchange/clients-and-mobile-in-exchange-online/enable-or-disable-modern-authentication-in-exchange-online).</span></span> 

<span data-ttu-id="d9478-165">若要为运行 Windows 且已安装 Microsoft Office 2013 的设备启用新式身份验证，需创建两个注册表项。</span><span class="sxs-lookup"><span data-stu-id="d9478-165">To enable modern authentication for devices running Windows that have Microsoft Office 2013 installed, you will need to create two registry keys.</span></span> <span data-ttu-id="d9478-166">请参阅[在 Windows 设备上启用适用于 Office 2013 的新式身份验证](/office365/admin/security-and-compliance/enable-modern-authentication)。</span><span class="sxs-lookup"><span data-stu-id="d9478-166">See [Enable Modern Authentication for Office 2013 on Windows devices](/office365/admin/security-and-compliance/enable-modern-authentication).</span></span>

#### <a name="is-there-a-policy-preventing-any-of-your-users-from-using-their-mobile-devices-while-working"></a><span data-ttu-id="d9478-167">是否有策略阻止用户在工作时使用其移动设备？</span><span class="sxs-lookup"><span data-stu-id="d9478-167">Is there a policy preventing any of your users from using their mobile devices while working?</span></span>

<span data-ttu-id="d9478-168">必须确定任何阻止员工在工作时使用移动设备的公司策略，因为它会影响你实现的具体的 MFA 解决方案。</span><span class="sxs-lookup"><span data-stu-id="d9478-168">It is important to identify any corporate policy that prevents employees from using mobile devices while working because it will influence what MFA solution you implement.</span></span> <span data-ttu-id="d9478-169">有的解决方案（例如通过实施 [Azure AD 安全性默认设置](/azure/active-directory/conditional-access/concept-conditional-access-security-defaults)提供的解决方案）仅允许使用 Authenticator 应用进行验证。</span><span class="sxs-lookup"><span data-stu-id="d9478-169">There are solutions, such as the one provided through the implementation of [Azure AD security defaults](/azure/active-directory/conditional-access/concept-conditional-access-security-defaults), that only allow the use of an authenticator app for verification.</span></span> <span data-ttu-id="d9478-170">如果组织的某项策略阻止使用移动设备，则请考虑以下选项之一：</span><span class="sxs-lookup"><span data-stu-id="d9478-170">If your organization has a policy preventing the use of mobile devices, then consider one of the following options:</span></span>

- <span data-ttu-id="d9478-171">部署可以在安全系统上运行的基于时间的一次性密码 (TOTP) 应用程序。</span><span class="sxs-lookup"><span data-stu-id="d9478-171">Deploy a time-based one-time base password (TOTP) application that can run on secure system.</span></span>

- <span data-ttu-id="d9478-172">实现第三方解决方案，为合作伙伴租户中的每个用户帐户强制实施 MFA，以便提供最适当的验证选项。</span><span class="sxs-lookup"><span data-stu-id="d9478-172">Implement a third-party solution that enforces MFA for each user account in the partner tenant that provides the most appropriate verification option.</span></span>

- <span data-ttu-id="d9478-173">为受影响的用户购买 [Azure Active Directory Premium](https://azure.microsoft.com/pricing/details/active-directory/) 许可证。</span><span class="sxs-lookup"><span data-stu-id="d9478-173">Purchase [Azure Active Directory Premium](https://azure.microsoft.com/pricing/details/active-directory/) licenses for the impacted users.</span></span>

#### <a name="what-automation-or-integration-do-you-have-to-leverage-user-credentials-for-authentication"></a><span data-ttu-id="d9478-174">你有哪种自动化或集成来利用用户凭据进行身份验证？</span><span class="sxs-lookup"><span data-stu-id="d9478-174">What automation or integration do you have to leverage user credentials for authentication?</span></span>

<span data-ttu-id="d9478-175">由于我们对合作伙伴目录中的每位用户（包括服务帐户）强制实施 MFA，因此任何利用用户凭据进行身份验证的自动化或集成都会受影响。</span><span class="sxs-lookup"><span data-stu-id="d9478-175">Because we enforce MFA for each user, including service accounts, in your partner directory, this will impact any automation or integration that leverages user credentials for authentication.</span></span> <span data-ttu-id="d9478-176">因此，必须确定在这些情况下使用的是什么帐户。</span><span class="sxs-lookup"><span data-stu-id="d9478-176">So, it is important that you identify which accounts are being used in these situations.</span></span> <span data-ttu-id="d9478-177">请查看以下列表，了解要考虑的示例应用程序或服务：</span><span class="sxs-lookup"><span data-stu-id="d9478-177">See the following list of sample applications or services to consider:</span></span>

- <span data-ttu-id="d9478-178">控制面板，用于代表客户预配资源</span><span class="sxs-lookup"><span data-stu-id="d9478-178">Control panel used to provision resources on behalf of your customers</span></span>

- <span data-ttu-id="d9478-179">与任何用于客户发票（由于与 CSP 计划相关）和支持的平台的集成</span><span class="sxs-lookup"><span data-stu-id="d9478-179">Integration with any platform that is used for invoicing (as it relates to the CSP program) and supporting your customers</span></span>

- <span data-ttu-id="d9478-180">利用 Az、AzureRM、Azure AD、MS Online 等模块的 PowerShell 脚本</span><span class="sxs-lookup"><span data-stu-id="d9478-180">PowerShell scripts that utilize the Az, AzureRM, Azure AD, MS Online, etc. modules</span></span>

<span data-ttu-id="d9478-181">以上列表并不完整。</span><span class="sxs-lookup"><span data-stu-id="d9478-181">The above list is not comprehensive.</span></span> <span data-ttu-id="d9478-182">因此，必须对环境中利用用户凭据进行身份验证的任何应用程序或服务进行完整的评估。</span><span class="sxs-lookup"><span data-stu-id="d9478-182">So, it is important that you perform a complete assessment of any application or service in your environment that leverages user credentials for authentication.</span></span> <span data-ttu-id="d9478-183">在可能情况下，应该按[安全应用程序模型框架](/partner-center/develop/enable-secure-app-model)中的指南（不同于 MFA 的要求）进行操作。</span><span class="sxs-lookup"><span data-stu-id="d9478-183">To contend with the requirement for MFA, you should implement the guidance in the [Secure Application Model framework](/partner-center/develop/enable-secure-app-model) where possible.</span></span>

## <a name="accessing-your-environment"></a><span data-ttu-id="d9478-184">访问环境</span><span class="sxs-lookup"><span data-stu-id="d9478-184">Accessing your environment</span></span>

<span data-ttu-id="d9478-185">若要更好地了解哪个帐户或用户在进行身份验证时没有受到 MFA 质询，建议查看登录活动。</span><span class="sxs-lookup"><span data-stu-id="d9478-185">To better understand what or who is authenticating without being challenged for MFA, we recommend you review the sign-in activity.</span></span> <span data-ttu-id="d9478-186">可通过 Azure Active Directory Premium 利用登录报表。</span><span class="sxs-lookup"><span data-stu-id="d9478-186">Through Azure Active Directory Premium, you can leverage the sign-in report.</span></span> <span data-ttu-id="d9478-187">有关此主题的详细信息，请参阅 [Azure Active Directory 门户中的登录活动报告](/azure/active-directory/reports-monitoring/concept-sign-ins)。</span><span class="sxs-lookup"><span data-stu-id="d9478-187">For more information about this topic, see [Sign-in activity reports in the Azure Active Directory portal](/azure/active-directory/reports-monitoring/concept-sign-ins).</span></span> <span data-ttu-id="d9478-188">如果你没有 Azure Active Directory Premium 或正打算通过 PowerShell 获取此登录活动，则需要利用[合作伙伴中心 PowerShell](https://www.powershellgallery.com/packages/PartnerCenter/) 模块中的 [Get-PartnerUserSignActivity](/powershell/module/partnercenter/get-partnerusersigninactivity) cmdlet。</span><span class="sxs-lookup"><span data-stu-id="d9478-188">If you do not have Azure Active Directory Premium, or you are looking for a way obtain this sign-in activity through PowerShell, then you will need to leverage the [Get-PartnerUserSignActivity](/powershell/module/partnercenter/get-partnerusersigninactivity) cmdlet from the [Partner Center PowerShell](https://www.powershellgallery.com/packages/PartnerCenter/) module.</span></span>

## <a name="how-the-requirements-are-enforced"></a><span data-ttu-id="d9478-189">如何强制实施这些要求</span><span class="sxs-lookup"><span data-stu-id="d9478-189">How the requirements are enforced</span></span>

<span data-ttu-id="d9478-190">合作伙伴安全要求先后由 Azure AD 和合作伙伴中心强制实施，方法是：检查是否存在 MFA 声明，以便确定是否进行了 MFA 验证。</span><span class="sxs-lookup"><span data-stu-id="d9478-190">Partner security requirements are enforced by Azure AD, and in turn Partner Center, by checking for the presence of the MFA claim to identify that MFA verification has taken place.</span></span> <span data-ttu-id="d9478-191">从 2019 年 11 月 18 日开始，Microsoft 激活了针对合作伙伴租户的其他安全保护措施（以前称为“技术强制措施”）。</span><span class="sxs-lookup"><span data-stu-id="d9478-191">Starting November 18, 2019, Microsoft activated additional security safeguards (previously known as “technical enforcement”) to partner tenants.</span></span>

<span data-ttu-id="d9478-192">激活后，合作伙伴租户中的用户在执行任何管理员代表 (AOBO) 操作、访问合作伙伴中心门户或调用合作伙伴中心 API 时都会被要求完成 MFA 验证。</span><span class="sxs-lookup"><span data-stu-id="d9478-192">Upon activation, users in the partner tenant are requested to complete MFA verification when performing any admin on behalf of (AOBO) operations, accessing the Partner Center portal, or calling Partner Center APIs.</span></span> <span data-ttu-id="d9478-193">有关详细信息，请参阅[为合作伙伴租户强制执行多重身份验证 (MFA)](partner-security-requirements-mandating-mfa.md)。</span><span class="sxs-lookup"><span data-stu-id="d9478-193">For more information, see [Mandating Multi-factor Authentication (MFA) for your partner tenant](partner-security-requirements-mandating-mfa.md).</span></span> 

<span data-ttu-id="d9478-194">尚未满足这些要求的合作伙伴应尽快实施这些措施，以免出现业务中断。</span><span class="sxs-lookup"><span data-stu-id="d9478-194">Partners who have not met the requirements should implement these measures as soon as possible to avoid any business disruptions.</span></span> <span data-ttu-id="d9478-195">如果使用 Azure 多重身份验证或 Azure AD 安全性默认设置，则不需执行任何其他操作。</span><span class="sxs-lookup"><span data-stu-id="d9478-195">If you are using Azure Multi-Factor Authentication or Azure AD security defaults, there are no additional actions you need to take.</span></span>

<span data-ttu-id="d9478-196">如果使用的是第三方 MFA 解决方案，可能会出现 MFA 声明未发出的情况。</span><span class="sxs-lookup"><span data-stu-id="d9478-196">If you are using a third-party MFA solution, there is a chance the MFA claim may not be issued.</span></span> <span data-ttu-id="d9478-197">如果缺少该声明，则 Azure AD 无法确定身份验证请求是否受到了 MFA 的质询。</span><span class="sxs-lookup"><span data-stu-id="d9478-197">If this claim is missing, Azure AD will not be able determine if the authentication request was challenged by MFA.</span></span> <span data-ttu-id="d9478-198">若要了解如何验证解决方案是否发出了预期的声明，请阅读[测试合作伙伴安全要求](/powershell/partnercenter/test-partner-security-requirements)。</span><span class="sxs-lookup"><span data-stu-id="d9478-198">For information on how to verify your solution is issuing the expected claim, read [Testing the Partner Security Requirements](/powershell/partnercenter/test-partner-security-requirements).</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="d9478-199">如果第三方解决方案未发出预期的声明，则需咨询开发该解决方案的供应商，以确定应该采取哪些措施。</span><span class="sxs-lookup"><span data-stu-id="d9478-199">If your third-party solution does not issue the expected claim, then you will need to work with the vendor who developed the solution to determine what actions should be taken.</span></span>

## <a name="resources-and-samples"></a><span data-ttu-id="d9478-200">资源和示例</span><span class="sxs-lookup"><span data-stu-id="d9478-200">Resources and samples</span></span>

<span data-ttu-id="d9478-201">请查看以下资源来获取支持和示例代码：</span><span class="sxs-lookup"><span data-stu-id="d9478-201">See the following resources for support and sample code:</span></span>

- <span data-ttu-id="d9478-202">[合作伙伴中心安全指导组社区](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance)：合作伙伴中心安全指导组社区是一个网上社区，你可在这里了解即将发生的活动并就你可能遇到的任何问题提问。</span><span class="sxs-lookup"><span data-stu-id="d9478-202">[Partner Center Security Guidance Group community](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance): The Partner Center Security Guidance Group community is an online community where you can learn about upcoming events and ask any questions that you might have.</span></span>
- <span data-ttu-id="d9478-203">[合作伙伴中心 .NET 示例](https://github.com/microsoft/partner-center-dotnet-samples)：这个 GitHub 存储库包含使用 .NET 开发的示例，用于演示如何实现安全应用程序模型框架。</span><span class="sxs-lookup"><span data-stu-id="d9478-203">[Partner Center .NET Samples](https://github.com/microsoft/partner-center-dotnet-samples): This GitHub repository contains samples, developed using .NET, that will demonstrate how you can implement the Secure Application Model framework.</span></span>
- <span data-ttu-id="d9478-204">[合作伙伴中心 Java 示例](https://github.com/microsoft/partner-center-java-samples)：这个 GitHub 存储库包含使用 Java 开发的示例，用于演示如何实现安全应用程序模型框架。</span><span class="sxs-lookup"><span data-stu-id="d9478-204">[Partner Center Java Samples](https://github.com/microsoft/partner-center-java-samples): This GitHub repository contains samples, developed using Java, that will demonstrate how you can implement the Secure Application Model framework.</span></span>
- <span data-ttu-id="d9478-205">[合作伙伴中心 PowerShell - 多重身份验证](/powershell/partnercenter/multi-factor-auth)：这篇关于多重身份验证的文章详细介绍了如何使用 PowerShell 实现安全应用程序模型框架。</span><span class="sxs-lookup"><span data-stu-id="d9478-205">[Partner Center PowerShell - Multi-Factor Authentication](/powershell/partnercenter/multi-factor-auth): This Multi-Factor Authentication article provides details on how to implement the Secure Application Model framework using PowerShell.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d9478-206">后续步骤</span><span class="sxs-lookup"><span data-stu-id="d9478-206">Next steps</span></span>

- [<span data-ttu-id="d9478-207">为合作伙伴租户强制执行多重身份验证 (MFA)</span><span class="sxs-lookup"><span data-stu-id="d9478-207">Mandating Multi-factor Authentication (MFA) for your partner tenant</span></span>](partner-security-requirements-mandating-mfa.md)